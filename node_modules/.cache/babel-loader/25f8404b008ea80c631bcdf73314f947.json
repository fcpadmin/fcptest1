{"ast":null,"code":"import config from '../../config'; // Possible inputs Stripe might require for a country\n// Bank account number (used in countries where IBAN is not in use)\n\nexport const ACCOUNT_NUMBER = 'accountNumber'; // Australian equivalent for routing number\n\nexport const BSB = 'bsb'; // Needed for creating full routing number in Canada\n\nexport const INSTITUTION_NUMBER = 'institutionNumber'; // Needed for creating full routing number in Canada\n\nexport const TRANSIT_NUMBER = 'transitNumber'; // Needed for creating full routing number in Hong Kong\n\nexport const CLEARING_CODE = 'clearingCode'; // Needed for creating full routing number in Hong Kong\n\nexport const BRANCH_CODE = 'branchCode'; // International bank account number (e.g. EU countries use this)\n\nexport const IBAN = 'iban'; // Routing number to separate bank account in different areas\n\nexport const ROUTING_NUMBER = 'routingNumber'; // British equivalent for routing number\n\nexport const SORT_CODE = 'sortCode'; // Currently supported bank account inputs\n// the order here matters: account number input is asked after routing number and its equivalents\n\nexport const BANK_ACCOUNT_INPUTS = [BSB, TRANSIT_NUMBER, INSTITUTION_NUMBER, CLEARING_CODE, BRANCH_CODE, SORT_CODE, ROUTING_NUMBER, ACCOUNT_NUMBER, IBAN];\nexport const supportedCountries = config.stripe.supportedCountries.map(c => c.code);\n/**\n * Country specific Stripe configurations\n *\n * @param {String} countryCode - string representing country code (e.g. 'US', 'FI')\n *\n * @return {Object} configurations\n */\n\nexport const stripeCountryConfigs = countryCode => {\n  const country = config.stripe.supportedCountries.find(c => c.code === countryCode);\n\n  if (!country) {\n    throw new Error(\"Country code not found in Stripe config \".concat(countryCode));\n  }\n\n  return country;\n};\n/**\n * Return all the inputs that are required in given country\n *\n * @param {String} countryCode - string representing country code (e.g. 'US', 'FI')\n *\n * @return {Array<String>} array containing different input 'types'\n * (e.g. ['routingNumber', 'accountNumber'])\n */\n\nexport const requiredInputs = countryCode => {\n  const bankAccountInputs = stripeCountryConfigs(countryCode).accountConfig;\n  return BANK_ACCOUNT_INPUTS.filter(inputType => bankAccountInputs[inputType]);\n};\n/**\n * Translate input type to human readable string\n *\n * @param {String} inputType - string representing one of the required bank account input\n * @param {Object} intl - translation library to format messages\n *\n * @return {String} formatted message\n */\n\nexport const inputTypeToString = (inputType, intl) => {\n  if (BANK_ACCOUNT_INPUTS.includes(inputType)) {\n    return intl.formatMessage({\n      id: \"StripeBankAccountTokenInputField.\".concat(inputType, \".inline\")\n    });\n  } else {\n    throw new Error(\"Unknown inputType (\".concat(inputType, \") given to validator\"));\n  }\n};\n/**\n * Translate Stripe error\n *\n * @param {String} country - string representing country code (e.g. 'US', 'FI')\n * @param {Object} intl - translation library to format errors\n * @param {Object} stripeError - actual Stripe error, which functions as default message,\n * if no translation can be found\n *\n * @return {String} formatted Stripe error\n */\n\nexport const translateStripeError = (country, intl, stripeError) => {\n  console.error('Stripe error:', stripeError); // eslint-disable-line no-console\n\n  const inputs = requiredInputs(country);\n  const ibanRequired = inputs[IBAN];\n\n  if (ibanRequired) {\n    return intl.formatMessage({\n      id: 'StripeBankAccountTokenInputField.genericStripeErrorIban',\n      defaultMessage: stripeError.message\n    }, {\n      country\n    });\n  } else {\n    const inputsAsStrings = inputs.map(inputType => inputTypeToString(inputType, intl));\n    const andTranslated = intl.formatMessage({\n      id: 'StripeBankAccountTokenInputField.andBeforeLastItemInAList'\n    }); // Print required inputs (to be included to error message)\n    // e.g. \"bank code, branch code and account number\"\n\n    const inputsInString = inputsAsStrings.length > 1 ? inputsAsStrings.join(', ').replace(/,([^,]*)$/, \"\".concat(andTranslated, \" $1\")) : inputsAsStrings[0];\n    return intl.formatMessage({\n      id: 'StripeBankAccountTokenInputField.genericStripeError',\n      defaultMessage: stripeError.message\n    }, {\n      country,\n      inputs: inputsInString\n    });\n  }\n};\n/**\n * Map inputs to correct Stripe keys\n *\n * @param {String} inputType - input type (e.g. 'routingNumber', 'IBAN')\n * @param {String} value - input value\n *\n * @return {Object} key - value in Object literal.\n */\n\nexport const mapInputsToStripeAccountKeys = (country, values) => {\n  // Stripe documentation speaks about actual bank account terms of different countries\n  // (like BSB, sort code, routing number), but all of those get mapped to one of\n  // the two different request keys: routing_number or account_number\n  // See: https://stripe.com/docs/payouts vs https://stripe.com/docs/connect/testing\n  // We use those country specific terms since we want to show correct labels and errors for users,\n  // so this mapping is needed before sending data to Stripe.\n  // Stripe fails if there are spaces within the number, this is\n  // why we have to clean value up first.\n  switch (country) {\n    case 'AT':\n    case 'BE':\n    case 'DK':\n    case 'FI':\n    case 'FR':\n    case 'DE':\n    case 'IE':\n    case 'IT':\n    case 'LU':\n    case 'NL':\n    case 'PT':\n    case 'ES':\n    case 'SE':\n    case 'CH':\n    case 'NO':\n      return {\n        account_number: cleanedString(values[IBAN])\n      };\n\n    case 'NZ':\n      // NZ account number is typically presented in the format xx-xxxx-xxxxxxx-xxx\n      // '-' separators must be removed before sending value to Stripe API\n      return {\n        account_number: cleanedString(values[ACCOUNT_NUMBER]).replace(/-/g, '')\n      };\n\n    case 'AU':\n      return {\n        routing_number: cleanedString(values[BSB]),\n        account_number: cleanedString(values[ACCOUNT_NUMBER])\n      };\n\n    case 'CA':\n      return {\n        routing_number: cleanedString(values[TRANSIT_NUMBER]).concat(cleanedString(values[INSTITUTION_NUMBER])),\n        account_number: cleanedString(values[ACCOUNT_NUMBER])\n      };\n\n    case 'GB':\n      return {\n        routing_number: cleanedString(values[SORT_CODE]),\n        account_number: cleanedString(values[ACCOUNT_NUMBER])\n      };\n\n    case 'US':\n      return {\n        routing_number: cleanedString(values[ROUTING_NUMBER]),\n        account_number: cleanedString(values[ACCOUNT_NUMBER])\n      };\n\n    case 'HK':\n      return {\n        routing_number: cleanedString(values[CLEARING_CODE]).concat('-', cleanedString(values[BRANCH_CODE])),\n        account_number: cleanedString(values[ACCOUNT_NUMBER])\n      };\n\n    default:\n      throw new Error(\"Not supported country (\".concat(country, \") given to validator\"));\n  }\n};\n/**\n * Translate messages related to different input types.\n *\n * Check translations for StripeBankAccountTokenInputField\n * from [rootFolder]/src/translations/en.json\n *\n * @param {Object} intl - translation library to format errors\n * @param {String} inputType - input type (e.g. 'routingNumber', 'IBAN')\n * @param {String} messageType - one of the different messages related to inputType\n * (e.g. 'inline', 'invalid', 'label', 'placeholder', 'required')\n *\n * @return {Object} key - value in Object literal.\n */\n\nexport const formatFieldMessage = (intl, inputType, messageType) => {\n  if (!BANK_ACCOUNT_INPUTS.includes(inputType)) {\n    throw new Error(\"inputType (\".concat(inputType, \") must be one of \").concat(BANK_ACCOUNT_INPUTS));\n  }\n\n  return intl.formatMessage({\n    id: \"StripeBankAccountTokenInputField.\".concat(inputType, \".\").concat(messageType)\n  });\n};\n/**\n * Remove all whitespace from the given string.\n *\n * @param {String} str - target string\n *\n * @return {String} cleaned string\n */\n\nexport const cleanedString = str => {\n  return str ? str.replace(/\\s/g, '') : '';\n};","map":{"version":3,"sources":["/Users/matthewmcelwee/fcprepos/webtest1/flex-template-web/src/components/StripeBankAccountTokenInputField/StripeBankAccountTokenInputField.util.js"],"names":["config","ACCOUNT_NUMBER","BSB","INSTITUTION_NUMBER","TRANSIT_NUMBER","CLEARING_CODE","BRANCH_CODE","IBAN","ROUTING_NUMBER","SORT_CODE","BANK_ACCOUNT_INPUTS","supportedCountries","stripe","map","c","code","stripeCountryConfigs","countryCode","country","find","Error","requiredInputs","bankAccountInputs","accountConfig","filter","inputType","inputTypeToString","intl","includes","formatMessage","id","translateStripeError","stripeError","console","error","inputs","ibanRequired","defaultMessage","message","inputsAsStrings","andTranslated","inputsInString","length","join","replace","mapInputsToStripeAccountKeys","values","account_number","cleanedString","routing_number","concat","formatFieldMessage","messageType","str"],"mappings":"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","sourcesContent":["import config from '../../config';\n\n// Possible inputs Stripe might require for a country\n\n// Bank account number (used in countries where IBAN is not in use)\nexport const ACCOUNT_NUMBER = 'accountNumber';\n// Australian equivalent for routing number\nexport const BSB = 'bsb';\n// Needed for creating full routing number in Canada\nexport const INSTITUTION_NUMBER = 'institutionNumber';\n// Needed for creating full routing number in Canada\nexport const TRANSIT_NUMBER = 'transitNumber';\n// Needed for creating full routing number in Hong Kong\nexport const CLEARING_CODE = 'clearingCode';\n// Needed for creating full routing number in Hong Kong\nexport const BRANCH_CODE = 'branchCode';\n// International bank account number (e.g. EU countries use this)\nexport const IBAN = 'iban';\n// Routing number to separate bank account in different areas\nexport const ROUTING_NUMBER = 'routingNumber';\n// British equivalent for routing number\nexport const SORT_CODE = 'sortCode';\n\n// Currently supported bank account inputs\n// the order here matters: account number input is asked after routing number and its equivalents\nexport const BANK_ACCOUNT_INPUTS = [\n  BSB,\n  TRANSIT_NUMBER,\n  INSTITUTION_NUMBER,\n  CLEARING_CODE,\n  BRANCH_CODE,\n  SORT_CODE,\n  ROUTING_NUMBER,\n  ACCOUNT_NUMBER,\n  IBAN,\n];\n\nexport const supportedCountries = config.stripe.supportedCountries.map(c => c.code);\n\n/**\n * Country specific Stripe configurations\n *\n * @param {String} countryCode - string representing country code (e.g. 'US', 'FI')\n *\n * @return {Object} configurations\n */\nexport const stripeCountryConfigs = countryCode => {\n  const country = config.stripe.supportedCountries.find(c => c.code === countryCode);\n\n  if (!country) {\n    throw new Error(`Country code not found in Stripe config ${countryCode}`);\n  }\n  return country;\n};\n\n/**\n * Return all the inputs that are required in given country\n *\n * @param {String} countryCode - string representing country code (e.g. 'US', 'FI')\n *\n * @return {Array<String>} array containing different input 'types'\n * (e.g. ['routingNumber', 'accountNumber'])\n */\nexport const requiredInputs = countryCode => {\n  const bankAccountInputs = stripeCountryConfigs(countryCode).accountConfig;\n  return BANK_ACCOUNT_INPUTS.filter(inputType => bankAccountInputs[inputType]);\n};\n\n/**\n * Translate input type to human readable string\n *\n * @param {String} inputType - string representing one of the required bank account input\n * @param {Object} intl - translation library to format messages\n *\n * @return {String} formatted message\n */\nexport const inputTypeToString = (inputType, intl) => {\n  if (BANK_ACCOUNT_INPUTS.includes(inputType)) {\n    return intl.formatMessage({ id: `StripeBankAccountTokenInputField.${inputType}.inline` });\n  } else {\n    throw new Error(`Unknown inputType (${inputType}) given to validator`);\n  }\n};\n\n/**\n * Translate Stripe error\n *\n * @param {String} country - string representing country code (e.g. 'US', 'FI')\n * @param {Object} intl - translation library to format errors\n * @param {Object} stripeError - actual Stripe error, which functions as default message,\n * if no translation can be found\n *\n * @return {String} formatted Stripe error\n */\nexport const translateStripeError = (country, intl, stripeError) => {\n  console.error('Stripe error:', stripeError); // eslint-disable-line no-console\n  const inputs = requiredInputs(country);\n  const ibanRequired = inputs[IBAN];\n  if (ibanRequired) {\n    return intl.formatMessage(\n      {\n        id: 'StripeBankAccountTokenInputField.genericStripeErrorIban',\n        defaultMessage: stripeError.message,\n      },\n      { country }\n    );\n  } else {\n    const inputsAsStrings = inputs.map(inputType => inputTypeToString(inputType, intl));\n\n    const andTranslated = intl.formatMessage({\n      id: 'StripeBankAccountTokenInputField.andBeforeLastItemInAList',\n    });\n    // Print required inputs (to be included to error message)\n    // e.g. \"bank code, branch code and account number\"\n    const inputsInString =\n      inputsAsStrings.length > 1\n        ? inputsAsStrings.join(', ').replace(/,([^,]*)$/, `${andTranslated} $1`)\n        : inputsAsStrings[0];\n\n    return intl.formatMessage(\n      {\n        id: 'StripeBankAccountTokenInputField.genericStripeError',\n        defaultMessage: stripeError.message,\n      },\n      { country, inputs: inputsInString }\n    );\n  }\n};\n\n/**\n * Map inputs to correct Stripe keys\n *\n * @param {String} inputType - input type (e.g. 'routingNumber', 'IBAN')\n * @param {String} value - input value\n *\n * @return {Object} key - value in Object literal.\n */\nexport const mapInputsToStripeAccountKeys = (country, values) => {\n  // Stripe documentation speaks about actual bank account terms of different countries\n  // (like BSB, sort code, routing number), but all of those get mapped to one of\n  // the two different request keys: routing_number or account_number\n  // See: https://stripe.com/docs/payouts vs https://stripe.com/docs/connect/testing\n\n  // We use those country specific terms since we want to show correct labels and errors for users,\n  // so this mapping is needed before sending data to Stripe.\n\n  // Stripe fails if there are spaces within the number, this is\n  // why we have to clean value up first.\n\n  switch (country) {\n    case 'AT':\n    case 'BE':\n    case 'DK':\n    case 'FI':\n    case 'FR':\n    case 'DE':\n    case 'IE':\n    case 'IT':\n    case 'LU':\n    case 'NL':\n    case 'PT':\n    case 'ES':\n    case 'SE':\n    case 'CH':\n    case 'NO':\n      return { account_number: cleanedString(values[IBAN]) };\n    case 'NZ':\n      // NZ account number is typically presented in the format xx-xxxx-xxxxxxx-xxx\n      // '-' separators must be removed before sending value to Stripe API\n      return { account_number: cleanedString(values[ACCOUNT_NUMBER]).replace(/-/g, '') };\n    case 'AU':\n      return {\n        routing_number: cleanedString(values[BSB]),\n        account_number: cleanedString(values[ACCOUNT_NUMBER]),\n      };\n    case 'CA':\n      return {\n        routing_number: cleanedString(values[TRANSIT_NUMBER]).concat(\n          cleanedString(values[INSTITUTION_NUMBER])\n        ),\n        account_number: cleanedString(values[ACCOUNT_NUMBER]),\n      };\n    case 'GB':\n      return {\n        routing_number: cleanedString(values[SORT_CODE]),\n        account_number: cleanedString(values[ACCOUNT_NUMBER]),\n      };\n    case 'US':\n      return {\n        routing_number: cleanedString(values[ROUTING_NUMBER]),\n        account_number: cleanedString(values[ACCOUNT_NUMBER]),\n      };\n    case 'HK':\n      return {\n        routing_number: cleanedString(values[CLEARING_CODE]).concat(\n          '-',\n          cleanedString(values[BRANCH_CODE])\n        ),\n        account_number: cleanedString(values[ACCOUNT_NUMBER]),\n      };\n\n    default:\n      throw new Error(`Not supported country (${country}) given to validator`);\n  }\n};\n\n/**\n * Translate messages related to different input types.\n *\n * Check translations for StripeBankAccountTokenInputField\n * from [rootFolder]/src/translations/en.json\n *\n * @param {Object} intl - translation library to format errors\n * @param {String} inputType - input type (e.g. 'routingNumber', 'IBAN')\n * @param {String} messageType - one of the different messages related to inputType\n * (e.g. 'inline', 'invalid', 'label', 'placeholder', 'required')\n *\n * @return {Object} key - value in Object literal.\n */\nexport const formatFieldMessage = (intl, inputType, messageType) => {\n  if (!BANK_ACCOUNT_INPUTS.includes(inputType)) {\n    throw new Error(`inputType (${inputType}) must be one of ${BANK_ACCOUNT_INPUTS}`);\n  }\n\n  return intl.formatMessage({\n    id: `StripeBankAccountTokenInputField.${inputType}.${messageType}`,\n  });\n};\n\n/**\n * Remove all whitespace from the given string.\n *\n * @param {String} str - target string\n *\n * @return {String} cleaned string\n */\nexport const cleanedString = str => {\n  return str ? str.replace(/\\s/g, '') : '';\n};\n"]},"metadata":{},"sourceType":"module"}