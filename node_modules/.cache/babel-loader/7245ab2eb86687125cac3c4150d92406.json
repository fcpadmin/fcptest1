{"ast":null,"code":"var _jsxFileName = \"/Users/matthewmcelwee/fcprepos/webtest1/flex-template-web/src/components/RangeSlider/Handle.js\";\nimport React, { Component } from 'react';\nimport { func, number, string } from 'prop-types';\nimport classNames from 'classnames';\nimport css from './Handle.css';\n\nclass Handle extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      dragging: false,\n      relativePos: null\n    };\n    this.handleRef = React.createRef();\n    this._isMounted = false;\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onTouchMove = this.onTouchMove.bind(this);\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n    this.onStart = this.onStart.bind(this);\n    this.onMove = this.onMove.bind(this);\n    this.onEnd = this.onEnd.bind(this);\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n    this.onMouseMoveListener = window.addEventListener('mousemove', this.onMouseMove, false);\n    this.onMouseUpListener = window.addEventListener('mouseup', this.onMouseUp, false);\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n    window.removeEventListener('mousemove', this.onMouseMoveListener, false);\n    window.removeEventListener('mouseup', this.onMouseUpListener, false);\n  }\n\n  onMouseDown(e) {\n    e.stopPropagation();\n    e.preventDefault();\n    this.onStart(e.pageX);\n  }\n\n  onMouseMove(e) {\n    if (!this.state.dragging) return;\n    this.onMove(e.pageX);\n  }\n\n  onMouseUp(e) {\n    e.stopPropagation();\n    e.preventDefault();\n    this.onEnd();\n  }\n\n  onTouchStart(e) {\n    e.stopPropagation();\n    e.preventDefault();\n    const touchpageX = e.touches[0].pageX;\n    this.onStart(touchpageX);\n  }\n\n  onTouchMove(e) {\n    if (!this.state.dragging) return;\n    this.onMove(e.touches[0].pageX);\n  }\n\n  onTouchEnd(e) {\n    e.stopPropagation();\n    e.preventDefault();\n    this.onEnd();\n  }\n\n  onStart(pagePosition) {\n    const _this$handleRef$curre = this.handleRef.current,\n          offsetLeft = _this$handleRef$curre.offsetLeft,\n          offsetWidth = _this$handleRef$curre.offsetWidth;\n    this.setState({\n      dragging: true,\n      relativePos: pagePosition - offsetLeft - offsetWidth / 2\n    });\n    this.props.changeActive();\n  }\n\n  onMove(pagePosition) {\n    const _this$props = this.props,\n          min = _this$props.min,\n          max = _this$props.max,\n          positionToValue = _this$props.positionToValue;\n    const position = pagePosition - this.state.relativePos;\n    const currentValue = positionToValue(position);\n    const value = currentValue < min ? min : currentValue > max ? max : currentValue;\n    this.props.onChange(value);\n  }\n\n  onEnd() {\n    // Ensuring that setState doesn't get called.\n    // This a strange behaviour since window.removeEventListener is called in componentWillUnmount\n    if (this._isMounted) {\n      this.setState({\n        dragging: false\n      });\n    }\n  }\n\n  render() {\n    const _this$props2 = this.props,\n          rootClassName = _this$props2.rootClassName,\n          className = _this$props2.className,\n          value = _this$props2.value,\n          valueToPosition = _this$props2.valueToPosition;\n    const position = valueToPosition(value);\n    const classes = classNames(rootClassName || css.rootTouchBuffer, className);\n    return React.createElement(\"div\", {\n      className: classes,\n      ref: this.handleRef,\n      style: {\n        left: \"\".concat(position, \"px\")\n      },\n      onMouseDown: this.onMouseDown,\n      onMouseMove: this.onMouseMove,\n      onMouseUp: this.onMouseUp,\n      onTouchStart: this.onTouchStart,\n      onTouchMove: this.onTouchMove,\n      onTouchEnd: this.onTouchEnd,\n      role: \"button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: classNames(css.visibleHandle, {\n        [css.dragged]: this.state.dragging\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }));\n  }\n\n}\n\nHandle.defaultProps = {\n  rootClassName: null,\n  className: null\n};\nHandle.propTypes = {\n  rootClassName: string,\n  className: string,\n  min: number.isRequired,\n  max: number.isRequired,\n  valueToPosition: func.isRequired,\n  positionToValue: func.isRequired\n};\nexport default Handle;","map":{"version":3,"sources":["/Users/matthewmcelwee/fcprepos/webtest1/flex-template-web/src/components/RangeSlider/Handle.js"],"names":["React","Component","func","number","string","classNames","css","Handle","constructor","props","state","dragging","relativePos","handleRef","createRef","_isMounted","onMouseDown","bind","onMouseMove","onMouseUp","onTouchStart","onTouchMove","onTouchEnd","onStart","onMove","onEnd","componentDidMount","onMouseMoveListener","window","addEventListener","onMouseUpListener","componentWillUnmount","removeEventListener","e","stopPropagation","preventDefault","pageX","touchpageX","touches","pagePosition","current","offsetLeft","offsetWidth","setState","changeActive","min","max","positionToValue","position","currentValue","value","onChange","render","rootClassName","className","valueToPosition","classes","rootTouchBuffer","left","visibleHandle","dragged","defaultProps","propTypes","isRequired"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { func, number, string } from 'prop-types';\nimport classNames from 'classnames';\n\nimport css from './Handle.css';\n\nclass Handle extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { dragging: false, relativePos: null };\n\n    this.handleRef = React.createRef();\n    this._isMounted = false;\n\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onTouchMove = this.onTouchMove.bind(this);\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n\n    this.onStart = this.onStart.bind(this);\n    this.onMove = this.onMove.bind(this);\n    this.onEnd = this.onEnd.bind(this);\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n    this.onMouseMoveListener = window.addEventListener('mousemove', this.onMouseMove, false);\n    this.onMouseUpListener = window.addEventListener('mouseup', this.onMouseUp, false);\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n    window.removeEventListener('mousemove', this.onMouseMoveListener, false);\n    window.removeEventListener('mouseup', this.onMouseUpListener, false);\n  }\n\n  onMouseDown(e) {\n    e.stopPropagation();\n    e.preventDefault();\n\n    this.onStart(e.pageX);\n  }\n  onMouseMove(e) {\n    if (!this.state.dragging) return;\n\n    this.onMove(e.pageX);\n  }\n  onMouseUp(e) {\n    e.stopPropagation();\n    e.preventDefault();\n\n    this.onEnd();\n  }\n\n  onTouchStart(e) {\n    e.stopPropagation();\n    e.preventDefault();\n\n    const touchpageX = e.touches[0].pageX;\n    this.onStart(touchpageX);\n  }\n  onTouchMove(e) {\n    if (!this.state.dragging) return;\n\n    this.onMove(e.touches[0].pageX);\n  }\n  onTouchEnd(e) {\n    e.stopPropagation();\n    e.preventDefault();\n\n    this.onEnd();\n  }\n\n  onStart(pagePosition) {\n    const { offsetLeft, offsetWidth } = this.handleRef.current;\n    this.setState({ dragging: true, relativePos: pagePosition - offsetLeft - offsetWidth / 2 });\n    this.props.changeActive();\n  }\n  onMove(pagePosition) {\n    const { min, max, positionToValue } = this.props;\n    const position = pagePosition - this.state.relativePos;\n    const currentValue = positionToValue(position);\n\n    const value = currentValue < min ? min : currentValue > max ? max : currentValue;\n\n    this.props.onChange(value);\n  }\n  onEnd() {\n    // Ensuring that setState doesn't get called.\n    // This a strange behaviour since window.removeEventListener is called in componentWillUnmount\n    if (this._isMounted) {\n      this.setState({ dragging: false });\n    }\n  }\n\n  render() {\n    const { rootClassName, className, value, valueToPosition } = this.props;\n    const position = valueToPosition(value);\n    const classes = classNames(rootClassName || css.rootTouchBuffer, className);\n\n    return (\n      <div\n        className={classes}\n        ref={this.handleRef}\n        style={{ left: `${position}px` }}\n        onMouseDown={this.onMouseDown}\n        onMouseMove={this.onMouseMove}\n        onMouseUp={this.onMouseUp}\n        onTouchStart={this.onTouchStart}\n        onTouchMove={this.onTouchMove}\n        onTouchEnd={this.onTouchEnd}\n        role=\"button\"\n      >\n        <div\n          className={classNames(css.visibleHandle, {\n            [css.dragged]: this.state.dragging,\n          })}\n        />\n      </div>\n    );\n  }\n}\n\nHandle.defaultProps = {\n  rootClassName: null,\n  className: null,\n};\n\nHandle.propTypes = {\n  rootClassName: string,\n  className: string,\n  min: number.isRequired,\n  max: number.isRequired,\n  valueToPosition: func.isRequired,\n  positionToValue: func.isRequired,\n};\n\nexport default Handle;\n"]},"metadata":{},"sourceType":"module"}